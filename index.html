<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trade Board Pro</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<!-- FontAwesome -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<style>
body, html{margin:0;padding:0;font-family:'Segoe UI',sans-serif;background:#111;color:#fff;overflow-x:hidden;}
header{background:#0f9d58;color:#fff;padding:1rem;text-align:center;font-size:1.8rem;font-weight:bold;}
nav{display:flex;justify-content:space-around;background:#222;padding:0.5rem 0;position:sticky;top:0;z-index:10;}
nav button{padding:0.6rem 1.2rem;border:none;border-radius:6px;font-weight:bold;cursor:pointer;transition:0.3s;background:#333;color:#fff;}
nav button.active{background:#0f9d58;color:#fff;}
section{padding:1rem;}
.strategy, .calendar-container, .news-item, .photo-item{background:#222;margin-bottom:1rem;padding:1rem;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.3);}
input,textarea,select{width:100%;padding:0.4rem;margin:0.2rem 0;border-radius:5px;border:1px solid #555;background:#111;color:#fff;}
button.addEntry,button.authButton{background:#0f9d58;color:#fff;padding:0.5rem;border:none;border-radius:6px;cursor:pointer;width:100%;margin-top:0.5rem;transition:0.2s;}
button.addEntry:hover,button.authButton:hover{background:#07ff7c;}
#authContainer{max-width:400px;margin:1rem auto;background:#222;padding:1rem;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.3);}
#signOutBtn{margin-top:0.5rem;}
#introScreen{position:fixed;top:0;left:0;width:100%;height:100%;background:#0f9d58;color:#111;display:flex;justify-content:center;align-items:center;flex-direction:column;transition:transform 1s ease-out;z-index:100;}
#introScreen.hide{transform:translateX(-100%);}
#introScreen h1{font-size:3rem;margin:0;}
#introScreen p{font-size:1.2rem;margin-top:1rem;text-align:center;max-width:600px;line-height:1.4;}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:#333;border-radius:8px;overflow:hidden;}
.calendar div{background:#111;min-height:80px;padding:0.4rem;position:relative;font-size:0.9rem;cursor:pointer;transition:0.3s;}
.calendar div:hover{background:#0f9d58;}
.calendar div span{position:absolute;top:3px;right:5px;font-size:0.75rem;font-weight:bold;}
.entry{margin-top:1.2rem;font-size:0.75rem;display:flex;align-items:center;transition:0.2s;}
.entry i{margin-right:5px;}
.entry .gain{color:#07ff7c;font-weight:bold;}
.entry .loss{color:red;font-weight:bold;}
.photo-item img{width:100%;border-radius:8px;margin-bottom:0.3rem;}
.news-item a{text-decoration:none;color:#0f9d58;}
.news-item a:hover{text-decoration:underline;}
</style>
</head>
<body>

<!-- Intro -->
<div id="introScreen">
  <h1>Trade Board Pro</h1>
  <p>Bienvenue sur votre application de suivi de stratégies et journal de trading.<br>
  Planifiez, suivez vos positions et analysez vos performances.<br>
  "Le succès en trading vient de la discipline et de l'organisation."</p>
</div>

<header id="mainHeader">Trade Board Pro <i id="homeBtn" class="fas fa-home" style="float:right;cursor:pointer;"></i></header>

<!-- Auth -->
<div id="authContainer">
  <h2>Connexion</h2>
  <input type="email" id="authEmail" placeholder="Adresse e-mail">
  <input type="password" id="authPassword" placeholder="Mot de passe">
  <button class="authButton" id="signInBtn">Se connecter</button>
  <button class="authButton" id="signUpBtn">Créer un compte</button>
  <button class="authButton" id="signOutBtn" style="display:none;">Se déconnecter</button>
</div>

<!-- Nav -->
<nav id="mainNav" style="display:none;">
  <button id="tab-news" class="active">Actualité</button>
  <button id="tab-strategies">Stratégies</button>
  <button id="tab-calendar">Calendrier</button>
  <button id="tab-photos">Photos</button>
</nav>

<!-- Sections -->
<section id="section-news" style="display:none;">
  <h2>Actualité Financière</h2>
  <div id="newsCarousel"></div>
  <h3>Interprétations marché</h3>
  <ul id="marketAnalysis"></ul>
  <h3>Calendrier économique</h3>
  <iframe src="https://www.investing.com/economic-calendar/" style="width:100%;height:400px;border:none;border-radius:8px;"></iframe>
</section>

<section id="section-strategies" style="display:none;">
  <h2>Mes stratégies</h2>
  <div id="strategiesContainer"></div>
  <button class="addEntry">Ajouter une stratégie</button>
</section>

<section id="section-calendar" style="display:none;">
  <h2>Calendrier & Journal</h2>
  <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
    <button id="prevMonth">&lt; Mois précédent</button>
    <span id="currentMonth" style="font-weight:bold;"></span>
    <button id="nextMonth">Mois suivant &gt;</button>
  </div>
  <div class="calendar" id="calendar"></div>
  <div id="entryForm" style="margin-top:1rem;">
    <input type="date" id="entryDate">
    <select id="entryAsset">
      <option value="EURUSD">EUR/USD</option>
      <option value="XAUUSD">XAU/USD (Gold)</option>
      <option value="USDIndex">US Dollar Index</option>
      <option value="BTCUSD">BTC/USD</option>
      <option value="NAS100">NAS100</option>
      <option value="DJ30">DJ30</option>
      <option value="AUTRE">Ajouter un actif...</option>
    </select>
    <select id="entryType"><option value="achat">Achat</option><option value="vente">Vente</option></select>
    <input type="number" id="entryPrice" placeholder="Prix">
    <input type="number" id="entryResult" placeholder="Résultat (gain/perte)">
    <textarea id="entryDescription" placeholder="Description"></textarea>
    <input type="file" id="entryPhoto">
    <button class="addEntry">Ajouter l'entrée</button>
  </div>
</section>

<section id="section-photos" style="display:none;">
  <h2>Mes photos</h2>
  <div id="photosGallery"></div>
</section>

<script>
// --- Firebase config ---
const firebaseConfig = {
  apiKey: "AIzaSyACFzFXKK_1EH6_PVgaQQXD3fc8mBvQRvg",
  authDomain: "perso-journaling.firebaseapp.com",
  projectId: "perso-journaling",
  storageBucket: "perso-journaling.firebasestorage.app",
  messagingSenderId: "660360215177",
  appId: "1:660360215177:web:WEBAPPID_A_REMPLACER"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

// --- Intro dynamique ---
const introScreen = document.getElementById("introScreen");
setTimeout(()=>{introScreen.classList.add("hide");setTimeout(()=>{introScreen.style.display="none";},1000);},3000);

// --- Navigation et onglets ---
const mainNav = document.getElementById("mainNav");
const sectionNews = document.getElementById("section-news");
const sectionStrategies = document.getElementById("section-strategies");
const sectionCalendar = document.getElementById("section-calendar");
const sectionPhotos = document.getElementById("section-photos");

function showSection(section){
  [sectionNews, sectionStrategies, sectionCalendar, sectionPhotos].forEach(s=>s.style.display="none");
  section.style.display="block";
}

document.getElementById("tab-news").addEventListener("click",()=>{showSection(sectionNews); setActiveTab("tab-news");});
document.getElementById("tab-strategies").addEventListener("click",()=>{showSection(sectionStrategies); setActiveTab("tab-strategies");});
document.getElementById("tab-calendar").addEventListener("click",()=>{showSection(sectionCalendar); setActiveTab("tab-calendar");});
document.getElementById("tab-photos").addEventListener("click",()=>{showSection(sectionPhotos); setActiveTab("tab-photos");});

function setActiveTab(id){
  document.querySelectorAll("nav button").forEach(btn=>btn.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

// --- Auth ---
const authContainer = document.getElementById("authContainer");
const signOutBtn = document.getElementById("signOutBtn");

auth.onAuthStateChanged(user=>{
  if(user){
    authContainer.style.display="none";
    mainNav.style.display="flex";
    showSection(sectionNews);
    signOutBtn.style.display="block";
    loadUserData(user.uid);
  }else{
    authContainer.style.display="block";
    mainNav.style.display="none";
    signOutBtn.style.display="none";
  }
});

document.getElementById("signInBtn").addEventListener("click",()=>{
  const email=document.getElementById("authEmail").value;
  const password=document.getElementById("authPassword").value;
  auth.signInWithEmailAndPassword(email,password).catch(err=>alert(err.message));
});

document.getElementById("signUpBtn").addEventListener("click",async()=>{
  const email=prompt("Email:");
  const password=prompt("Mot de passe:");
  try{
    const userCredential=await auth.createUserWithEmailAndPassword(email,password);
    const user=userCredential.user;
    await user.sendEmailVerification();
    alert("Compte créé ! Vérifiez votre email.");
  }catch(err){alert(err.message);}
});

signOutBtn.addEventListener("click",()=>auth.signOut());

document.getElementById("homeBtn").addEventListener("click",()=>{showSection(sectionNews); setActiveTab("tab-news");});

// --- Ici tu peux continuer à ajouter :
// - Gestion calendrier avec double clic, ajout/modification/suppression d'entrées
// - Stratégies dynamiques (ajout/suppression/modification)
// - Photos reliées aux jours
// - Actualités financières via API (Finhub ou autre)
// - Interprétations Gold/USD/BTC/NAS100 etc.
// Le code complet du calendrier, strategies et news peut être repris du script précédent que tu avais.

// Note: pour la partie live news, il faudra utiliser ton API Finhub comme précédemment et mettre à jour #newsCarousel et #marketAnalysis
</script>
</body>
</html>
