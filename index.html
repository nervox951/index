<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trade Board Professionnel</title>
<style>
:root {
  --bg: #f0f2f5;
  --card-bg: #fff;
  --text: #222;
  --header-bg: #1e293b;
  --header-text: #fff;
  --bar-bg: #e2e8f0;
  --bar-fill: linear-gradient(90deg, #22c55e, #16a34a);
  --btn-bg: #16a34a;
  --btn-text: #fff;
  --btn-inactive: #94a3b8;
  --gain-color: #22c55e;
  --loss-color: #ef4444;
}
body { margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,sans-serif; background: var(--bg); color: var(--text); }
header { background: var(--header-bg); color: var(--header-text); padding:1rem; text-align:center; font-size:1.5rem; font-weight:bold; }
.container { display:flex; flex-direction:column; height: calc(100vh - 60px); }
.strategies-list, .calendar-journal { flex:1; overflow-y:auto; padding:1rem; }
.strategy-card { background: var(--card-bg); border-radius:1rem; box-shadow:0 4px 10px rgba(0,0,0,0.15); margin-bottom:1rem; padding:1rem; }
.strategy-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem; }
.strategy-title { font-size:1.1rem; font-weight:bold; }
.progress-bar { background: var(--bar-bg); border-radius:1rem; height:10px; width:100%; overflow:hidden; margin:0.5rem 0; }
.progress-fill { height:100%; background: var(--bar-fill); width:0%; transition: width 0.3s ease; }
.criteria { list-style:none; padding:0; margin:0.5rem 0; }
.criteria li { margin-bottom:0.5rem; display:flex; align-items:center; }
.criteria input[type="checkbox"] { transform:scale(1.3); margin-right:0.75rem; }
.enter-btn { display:block; width:100%; padding:0.75rem; border:none; border-radius:0.75rem; background: var(--btn-inactive); color: var(--btn-text); font-size:1rem; font-weight:bold; margin-top:0.5rem; cursor:pointer; }
.enter-btn.active { background: var(--btn-bg); animation: pulse 1s infinite; }
@keyframes pulse { 0%{box-shadow:0 0 0 0 rgba(34,197,94,0.6);} 70%{box-shadow:0 0 0 15px rgba(34,197,94,0);} 100%{box-shadow:0 0 0 0 rgba(34,197,94,0);} }
.calendar-grid { display:grid; grid-template-columns: repeat(7, 1fr); gap:5px; }
.calendar-cell { background: var(--card-bg); border-radius:0.5rem; padding:0.5rem; min-height:100px; display:flex; flex-direction:column; justify-content:flex-start; cursor:pointer; position:relative; }
.calendar-cell .day-number { font-weight:bold; margin-bottom:0.25rem; }
.calendar-cell .summary { font-size:0.85rem; margin-top:auto; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000; }
.modal-content { background: var(--card-bg); padding:1rem; border-radius:1rem; width:90%; max-width:500px; max-height:90%; overflow-y:auto; }
.modal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem; }
.modal-header h3 { margin:0; }
.close-btn { cursor:pointer; font-weight:bold; }
.modal-form { display:flex; flex-direction:column; gap:0.5rem; margin-bottom:1rem; }
.modal-form input, .modal-form select, .modal-form textarea { padding:0.5rem; border-radius:0.5rem; border:1px solid var(--bar-bg); }
.modal-form button { padding:0.75rem; border:none; border-radius:0.75rem; background: var(--btn-bg); color:#fff; font-weight:bold; cursor:pointer; }
nav { display:flex; justify-content:center; background: var(--card-bg); padding:0.75rem 0; border-top:1px solid var(--bar-bg); position:fixed; bottom:0; width:100%; z-index:1000; }
nav button { margin:0 0.5rem; padding:0.5rem 1rem; border:none; border-radius:0.75rem; background: var(--btn-bg); color:#fff; font-weight:bold; cursor:pointer; }
@media (min-width:1024px){
  .container{flex-direction:row;}
  .strategies-list{flex:2; order:1; padding:1rem;}
  .calendar-journal{flex:4; order:2; padding:1rem;}
  nav{position:static; border-top:none;}
}
</style>
</head>
<body>
<header>ðŸ“ˆ Trade Board Professionnel</header>
<div class="container">
  <div class="strategies-list" id="strategiesList"></div>
  <div class="calendar-journal">
    <div id="calendarView"></div>
  </div>
</div>
<nav>
  <button onclick="showTab('strategies')">StratÃ©gies</button>
  <button onclick="showTab('calendar')">Calendrier / Journal</button>
</nav>

<div class="modal" id="journalModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modalDate"></h3>
      <span class="close-btn" onclick="closeModal()">âœ–</span>
    </div>
    <form class="modal-form" id="journalForm">
      <input type="text" id="asset" placeholder="Actif (ex: EURUSD)" required>
      <input type="number" id="price" placeholder="Prix d'entrÃ©e" required>
      <select id="type"><option value="achat">Achat</option><option value="vente">Vente</option></select>
      <input type="number" id="result" placeholder="RÃ©sultat (gain/perte)" required>
      <textarea id="description" placeholder="Description / notes"></textarea>
      <button type="submit">Ajouter</button>
    </form>
    <div id="entriesList"></div>
    <div style="display:flex; justify-content:space-between; margin-top:0.5rem;">
      <button onclick="prevMonth()">â¬… Mois prÃ©cÃ©dent</button>
      <button onclick="nextMonth()">Mois suivant âž¡</button>
    </div>
  </div>
</div>

<script>
let strategies=[{title:"Breakout H1 EURUSD",criteria:[{text:"Cassure rÃ©sistance H1",done:false},{text:"Volume > moyenne 20",done:false},{text:"RSI > 55",done:false},{text:"MACD bullish cross",done:false},{text:"Pas de news majeures",done:false}]},{title:"Rebond support BTCUSDT",criteria:[{text:"Test support daily",done:false},{text:"Bougie reversal",done:false},{text:"RSI oversold",done:false}]}];
let journal=[];
let currentDate=new Date();

function renderStrategies(){
  const list=document.getElementById('strategiesList'); list.innerHTML='';
  strategies.forEach((strategy,sIndex)=>{
    let completed=strategy.criteria.filter(c=>c.done).length;
    let total=strategy.criteria.length;
    let percent=Math.round((completed/total)*100);
    const card=document.createElement('div'); card.className='strategy-card';
    card.innerHTML=`<div class="strategy-header"><div class="strategy-title">${strategy.title}</div><div>${completed}/${total}</div></div>
      <div class="progress-bar"><div class="progress-fill" style="width:${percent}%"></div></div>
      <ul class="criteria">${strategy.criteria.map((c,i)=>`<li><input type="checkbox" ${c.done?'checked':''} data-s="${sIndex}" data-c="${i}">${c.text}</li>`).join('')}</ul>
      <button class="enter-btn ${percent===100?'active':''}">${percent===100?'âœ” Entrer en position':'Conditions incomplÃ¨tes'}</button>`;
    list.appendChild(card);
  });
  document.querySelectorAll('input[type="checkbox"]').forEach(cb=>{
    cb.addEventListener('change',e=>{
      const s=e.target.dataset.s; const c=e.target.dataset.c;
      strategies[s].criteria[c].done=e.target.checked; renderStrategies();
    });
  });
}

function showTab(tab){
  document.querySelector('.strategies-list').style.display=tab==='strategies'?'block':'none';
  document.querySelector('.calendar-journal').style.display=tab==='calendar'?'block':'none';
}

function openModal(date){
  document.getElementById('modalDate').textContent=date.toDateString();
  document.getElementById('journalModal').style.display='flex';
  renderEntries(date);
  document.getElementById('journalForm').onsubmit=function(e){
    e.preventDefault();
    const asset=document.getElementById('asset').value;
    const price=document.getElementById('price').value;
    const type=document.getElementById('type').value;
    const result=parseFloat(document.getElementById('result').value);
    const description=document.getElementById('description').value;
    journal.push({date: new Date(date).toDateString(), asset, price, type, result, description});
    e.target.reset();
    renderCalendar();
    renderEntries(date);
  }
}

function closeModal(){document.getElementById('journalModal').style.display='none';}

function renderEntries(date){
  const entriesDiv=document.getElementById('entriesList'); entriesDiv.innerHTML='';
  const dayEntries=journal.filter(e=>e.date===date.toDateString());
  dayEntries.forEach(e=>{
    const div=document.createElement('div'); div.style.borderBottom='1px solid #ccc'; div.style.marginBottom='0.25rem';
    div.innerHTML=`${e.asset} (${e.type}) @${e.price} â†’ ${e.result>0?'<span style="color:var(--gain-color)">+'+e.result+'</span>':'<span style="color:var(--loss-color)">'+e.result+'</span>'})<br>${e.description}`;
    entriesDiv.appendChild(div);
  });
}

function renderCalendar(){
  const cal=document.getElementById('calendarView'); cal.innerHTML='';
  let month=currentDate.getMonth(); let year=currentDate.getFullYear();
  let firstDay=new Date(year,month,1).getDay();
  let daysInMonth=new Date(year,month+1,0).getDate();
  const grid=document.createElement('div'); grid.className='calendar-grid';
  for(let i=0;i<firstDay;i++){ grid.appendChild(document.createElement('div')); }
  for(let d=1;d<=daysInMonth;d++){
    const dayDiv=document.createElement('div'); dayDiv.className='calendar-cell';
    const dayNum=document.createElement('div'); dayNum.className='day-number'; dayNum.textContent=d; dayDiv.appendChild(dayNum);
    let dayEntries=journal.filter(e=>new Date(e.date).getDate()===d && new Date(e.date).getMonth()===month && new Date(e.date).getFullYear()===year);
    if(dayEntries.length>0){
      let total=dayEntries.reduce((sum,e)=>sum+e.result,0);
      let summaryDiv=document.createElement('div'); summaryDiv.className='summary';
      summaryDiv.style.color=total>=0?'var(--gain-color)':'var(--loss-color)';
      summaryDiv.textContent=`${dayEntries.length} entrÃ©es, Total: ${total}`;
      dayDiv.appendChild(summaryDiv);
    }
    dayDiv.onclick=()=>openModal(new Date(year,month,d));
    grid.appendChild(dayDiv);
  }
  cal.appendChild(grid);
}

function prevMonth(){currentDate.setMonth(currentDate.getMonth()-1); renderCalendar();}
function nextMonth(){currentDate.setMonth(currentDate.getMonth()+1); renderCalendar();}

window.onload=()=>{renderStrategies(); showTab('calendar'); renderCalendar();};
</script>
</body>
</html>
